{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'todos/style.css' %}">
</head>
<body>
    <div class="container">
        <h1 class="text-center">üìã –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h1>
        <div class="text-end">
            <a href="{% url 'todo_create' %}" class="btn btn-custom">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</a>
        </div>
        <div class="row mt-4">
            {% for todo in todos %}
            <div class="col-md-4">
                <div class="todo-card p-3 mb-3">
                    <h4>{{ todo.title }}</h4>
                    <p>{{ todo.description }}</p>
                    <small>–°—Ä–æ–∫: {{ todo.due_date }}</small><br>
                    <form method="post" action="{% url 'todo_new_status' todo.id %}">
                        {% csrf_token %}
                        <input type="checkbox" onchange="this.form.submit()" {% if todo.status %}checked{% endif %}>
                        <label class="status-label">
                            {% if todo.status %}‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ{% else %}‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ{% endif %}
                        </label>
                    </form>
                    <div class="mt-2">
                        <a href="{% url 'todo_detail' todo.id %}" class="btn btn-light btn-sm">üîç –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                        <a href="{% url 'todo_delete' todo.id %}" class="btn btn-danger btn-sm">üóë –£–¥–∞–ª–∏—Ç—å</a>
                    </div>
                </div>
            </div>
            {% empty %}
            <p class="text-center">üòî –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á...</p>
            {% endfor %}
        </div>
    </div>
</body>
</html>
